(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8334],{7406:function(e,t,a){Promise.resolve().then(a.bind(a,8837))},7907:function(e,t,a){"use strict";var i=a(5313);a.o(i,"useRouter")&&a.d(t,{useRouter:function(){return i.useRouter}})},8837:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var i=a(3827),s=a(4090),n=a(3411),l=a.n(n),r=a(7908),c=a(1555),d=a(7907);function o(){let e=(0,d.useRouter)(),[t,a]=(0,s.useState)([]),[n,o]=(0,s.useState)(!1),[h,m]=(0,s.useState)({});(0,s.useEffect)(()=>{r.Z.get("".concat(c.Z,"/Supplier/AllSuppliers")).then(e=>{a(e.data.suppliers),m(e.data.pagination)}).catch(e=>{o(!0),l().fire({icon:"error",title:"حدث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[]),(0,s.useEffect)(()=>{(void 0!=h.pageNumber||null!=h.pageNumber)&&r.Z.get("".concat(c.Z,"/Supplier/AllSuppliers?pageNumber=").concat(h.pageNumber)).then(e=>{a(e.data.suppliers),m(e.data.pagination)}).catch(e=>{o(!0),l().fire({icon:"error",text:"حدث خطا اثناء جلب البيانات",timer:1200})})},[h.pageNumber]);let u=Math.ceil(h.total/h.pageSize),[p,x]=(0,s.useState)("");(0,s.useEffect)(()=>{""===p&&r.Z.get("".concat(c.Z,"/Supplier/AllSuppliers")).then(e=>{a(e.data.suppliers),m(e.data.pagination)}).catch(e=>{o(!0),l().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[p]);let[j,f]=(0,s.useState)([]),[N,g]=(0,s.useState)(!1),b=(0,s.useRef)(),v=e=>{N&&(g(!1),f(j.filter(t=>t!==e))),j.includes(e)?f(j.filter(t=>t!==e)):f([...j,e])},[S,k]=(0,s.useState)({id:"",name:"",address:"",email:"",phone:""}),[y,C]=(0,s.useState)(!1),[w,Z]=(0,s.useState)(!1),B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(k(e),Z(!0)):(k({id:"",name:"",address:"",email:"",phone:""}),Z(!1)),C(!0)},E=()=>{C(!1)},A=e=>{let{name:t,value:a}=e.target;k(e=>({...e,[t]:a}))},P=e=>{l().fire({title:"تأكيد",text:"هل تريد حذف هذا العنصر؟",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، احذف!",cancelButtonText:"إلغاء"}).then(i=>{i.isConfirmed&&(r.Z.delete("".concat(c.Z,"/Supplier/DeleteSupplier?id=").concat(e)).then(i=>{l().fire({icon:"success",title:"تم الحذف بنجاح",showConfirmButton:!1,timer:800}),setTimeout(()=>{a(t.filter(t=>t.id!==e))},400)}).catch(e=>{l().fire({icon:"error",title:"حدث خطأ ما اثناء الحذف",showConfirmButton:!1,timer:800})}),E())})};(0,s.useEffect)(()=>{var e=document.getElementById("selectAll-input");e.checked&&(e.checked=!1),document.querySelectorAll("#checkbox-item").forEach(e=>{e.checked&&(e.checked=!1)})},[t]);let[R,q]=(0,s.useState)(new Date),[D,T]=(0,s.useState)(!1),[I,L]=(0,s.useState)({date:!1,category:!1}),_=(0,s.useRef)(null),F=(0,s.useRef)(null),M=e=>{_.current&&!_.current.contains(e.target)&&F.current&&!F.current.contains(e.target)&&(T(!1),L({date:!1,category:!1}))};return(0,s.useEffect)(()=>(document.addEventListener("click",M),()=>{document.removeEventListener("click",M)}),[]),(0,i.jsxs)("div",{className:"table",children:[(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"header",children:[(0,i.jsxs)("div",{className:"head-box",children:[(0,i.jsx)("div",{className:"add-head",children:(0,i.jsx)("p",{onClick:()=>B(),className:"add-item",children:"إضافة مورد جديد"})}),(0,i.jsx)("div",{className:"add-head-print",onClick:()=>{if(0===j.length){l().fire({icon:"warning",title:"الرجاء تحديد عناصر للطباعة",showConfirmButton:!1,timer:1200});return}{let e=b.current.innerHTML,t=document.body.innerHTML;document.body.innerHTML=e,window.print(),document.body.innerHTML=t,window.location.reload()}},children:(0,i.jsx)("p",{className:"print-icon",children:(0,i.jsx)("i",{className:"fa-solid fa-print"})})})]}),(0,i.jsxs)("div",{className:"search-box has-arrow",children:[(0,i.jsxs)("form",{className:"d-flex search-top-table-form",role:"search",onSubmit:e=>{e.preventDefault(),""===p?r.Z.get("".concat(c.Z,"/Supplier/AllSuppliers")).then(e=>{a(e.data.suppliers),m(e.data.pagination)}).catch(e=>{o(!0),l().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})}):r.Z.post("".concat(c.Z,"/Supplier/SearchSupplier?name=").concat(p)).then(e=>{a(e.data)}).catch(e=>{l().fire({icon:"error",title:"لا يوجد نتائج",showConfirmButton:!1,timer:800})})},children:[(0,i.jsxs)("div",{className:"form-floating search-input",children:[(0,i.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"ابحث هنا",onChange:e=>x(e.target.value),value:p}),(0,i.jsx)("label",{htmlFor:"floatingInput",children:"اسم المورد"})]}),(0,i.jsx)("button",{className:"btn",type:"submit",children:(0,i.jsx)("i",{className:"fa-solid fa-search"})})]}),(0,i.jsx)("div",{className:"go-back-arrow",children:(0,i.jsx)("p",{onClick:()=>{e.back()},children:(0,i.jsx)("i",{className:"fa-solid fa-chevron-right"})})})]})]}),(0,i.jsx)("div",{className:"table-contant",children:(0,i.jsxs)("table",{className:"table table-striped table-hover",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{id:"head-Of-table",children:[(0,i.jsx)("th",{type:"hide",children:(0,i.jsx)("input",{type:"checkbox",checked:N,onChange:()=>{let e=document.querySelectorAll("#checkbox-item");N?(f([]),e.forEach(e=>{e.checked=!1})):(e.forEach(e=>{e.checked=!0}),f(t.map(e=>e.id))),g(!N)},id:"selectAll-input"})}),(0,i.jsx)("th",{scope:"col",type:"id",text:"ID",value:"id",children:"ID"}),(0,i.jsx)("th",{scope:"col",type:"text",value:"name",text:"اسم المورد",children:"اسم المورد "}),(0,i.jsx)("th",{scope:"col",type:"number",value:"phone",text:"رقم التليفون",children:"رقم التليفون"}),(0,i.jsx)("th",{scope:"col",type:"email",value:"email",text:"الايميل",children:"البريد الالكترونى"}),(0,i.jsx)("th",{scope:"col",type:"text",value:"address",text:"العنوان",children:"العنوان"}),(0,i.jsx)("th",{scope:"col",type:"hide",children:"تعديل"}),(0,i.jsx)("th",{scope:"col",type:"hide",children:"حذف"})]})}),(0,i.jsxs)("tbody",{children:[t.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"row",children:(0,i.jsx)("div",{className:"check-box",children:(0,i.jsx)("input",{type:"checkbox",id:"checkbox-item",checked:j.includes(e.id),onChange:t=>v(e.id,t)})})}),(0,i.jsx)("th",{scope:"row",children:(0,i.jsx)("div",{className:"check-box",children:(0,i.jsx)("p",{className:"item-id",children:e.id})})}),(0,i.jsx)("td",{className:"px-2",children:e.name}),(0,i.jsx)("td",{children:e.phone}),(0,i.jsx)("td",{className:"px-2",children:e.email}),(0,i.jsxs)("td",{className:"px-2",children:[(0,i.jsx)("p",{onClick:t=>{var a;return a=e.address,void l().fire({title:"العنوان",text:a,showConfirmButton:!1,showCloseButton:!0})},value:e.address,children:e.address.length>10?e.address.slice(0,10)+"...":e.address}),"                                        "]}),(0,i.jsx)("td",{className:"pen icon",children:(0,i.jsx)("i",{className:"fa-regular fa-pen-to-square",onClick:()=>B(e)})}),(0,i.jsx)("td",{className:"trash icon",children:(0,i.jsx)("i",{className:"fa-regular fa-trash-can",onClick:()=>P(e.id)})})]},e.id)),0==t.length&&n&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"8",className:"text-center",style:{color:"#ff0000",fontSize:"1.5rem",padding:"30px 0",letterSpacing:"1px"},children:"لا يوجد بيانات"})}),0==t.length&&!n&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"8",className:"text-center",style:{fontSize:"1.5rem",color:"#000",padding:"30px 0",letterSpacing:"1px"},children:"الرجاء الانتظار جاري تحميل البيانات ..."})})]})]})})]}),(0,i.jsx)("div",{className:"pagination-box-inventory",children:(0,i.jsx)("nav",{"aria-label":"Page navigation example",children:(0,i.jsxs)("ul",{className:"pagination",children:[(0,i.jsx)("li",{className:"page-item ".concat(!h.hasPreviousPage&&"disabled"),children:(0,i.jsx)("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:()=>{h.hasPreviousPage&&m(e=>({...e,pageNumber:e.pageNumber-1}))},children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),u>0&&[...Array(u).keys()].map(e=>(0,i.jsx)("li",{className:"page-item ".concat(h.pageNumber===e+1&&"active"),children:(0,i.jsx)("a",{className:"page-link",href:"#",onClick:()=>m(t=>({...t,pageNumber:e+1})),children:e+1})},e+1)),(0,i.jsx)("li",{className:"page-item ".concat(!h.hasNextPage&&"disabled"),children:(0,i.jsx)("a",{className:"page-link",href:"#","aria-label":"Next",onClick:()=>{h.hasNextPage&&m(e=>({...e,pageNumber:e.pageNumber+1}))},children:(0,i.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})}),(0,i.jsx)("div",{className:"inventory-print-container",ref:b,children:(0,i.jsxs)("div",{className:"inventory-print-container",children:[(0,i.jsx)("div",{className:"print-header",children:"الموردين"}),(0,i.jsx)("div",{className:"print-table-container",children:(0,i.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"ID"}),(0,i.jsx)("th",{children:"اسم المورد "}),(0,i.jsx)("th",{children:"رقم التليفون"}),(0,i.jsx)("th",{children:"البريد الالكترونى"}),(0,i.jsx)("th",{children:"العنوان"})]})}),(0,i.jsx)("tbody",{children:t.filter(e=>j.includes(e.id)).map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.id}),(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:e.phone}),(0,i.jsx)("td",{children:e.email}),(0,i.jsx)("td",{children:e.address})]},e.id))})]})}),(0,i.jsx)("div",{className:"print-footer",children:"\xa9 2024 تقرير المخزون"})]})}),y&&(0,i.jsx)("div",{className:"modal show d-block modal-client-form-edit-add",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,i.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("button",{type:"button",className:"close btn",onClick:E,children:(0,i.jsx)("i",{className:"bi bi-x-lg"})}),(0,i.jsx)("h5",{className:"modal-title",children:w?"تعديل":"إضافة مورد جديد"})]}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),w){let e={id:S.id,name:S.name,address:S.address,email:S.email,phone:S.phone};r.Z.put("".concat(c.Z,"/Supplier/UpdateSupplier?id=").concat(S.id),e).then(e=>{a(t.map(e=>e.id==S.id?S:e)),l().fire({icon:"success",title:"تم التعديل بنجاح",showConfirmButton:!1,timer:800})}).catch(e=>{l().fire({icon:"error",title:"حذث خطأ ما اثناء التعديل",showConfirmButton:!1,timer:800})})}else{let e={name:S.name,address:S.address,email:S.email,commercialRegister:S.commercialRegister,phone:S.phone};S.id=t.length+1,r.Z.post("".concat(c.Z,"/Supplier/AddSupplier"),e).then(e=>{r.Z.get("".concat(c.Z,"/Supplier/AllSuppliers")).then(e=>{a(e.data.suppliers),m(e.data.pagination)}).catch(e=>{o(!0)}),l().fire({icon:"success",title:"تمت الإضافة بنجاح",showConfirmButton:!1,timer:800})}).catch(e=>{l().fire({icon:"error",title:"حدث خطأ ما اثناء الإضافة",showConfirmButton:!1,timer:800})})}E()},className:"rowa",children:[(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"name",children:"اسم المورد"}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:S.name,onChange:A,required:!0})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"phone",children:"رقم الهاتف"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"phone",name:"phone",value:S.phone,onChange:A,required:!0})]})}),(0,i.jsx)("div",{className:"col-12 ",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"email",children:"البريد الإلكتروني"}),(0,i.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:S.email,onChange:A,required:!0})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsx)("label",{htmlFor:"address",children:"العنوان"}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"address",name:"address",value:S.address,onChange:A,required:!0})]})}),(0,i.jsx)("div",{className:"col-lg-12 mb-3",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:w?"تحديث":"إضافة"})})]})})]})})})]})}},1555:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});let i=a(8620).Buffer.from("".concat("11190013",":").concat("60-dayfreetrial"),"utf8").toString("base64");t.Z="http://16.24.26.228:8080/api"}},function(e){e.O(0,[9461,7908,2971,8069,1744],function(){return e(e.s=7406)}),_N_E=e.O()}]);