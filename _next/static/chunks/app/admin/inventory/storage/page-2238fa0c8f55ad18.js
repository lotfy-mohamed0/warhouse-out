(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6801],{8833:function(e,a,t){Promise.resolve().then(t.bind(t,9930))},7907:function(e,a,t){"use strict";var s=t(5313);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},9930:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var s=t(3827),n=t(4090),i=t(3838),r=t.n(i);t(2798);var c=t(7908),l=t(7907),o=t(1555);function d(e){let{params:a}=e,t=(0,l.useRouter)(),[i,d]=(0,n.useState)([]),[m,h]=(0,n.useState)(null),[u,p]=(0,n.useState)({});(0,n.useEffect)(()=>{c.Z.get("".concat(o.Z,"/Storage/AllStoragePagination")).then(e=>{d(e.data.storages),e.data.pagination.pageNumber,e.data.pagination.pageSize,e.data.pagination.total,e.data.pagination.hasNextPage,e.data.pagination.hasPreviousPage,p(e.data.pagination)}).catch(e=>{h(e),r().fire({icon:"error",text:"حدث خطا اثناء تحميل البيانات",timer:800})})},[]),(0,n.useEffect)(()=>{(void 0!=u.pageNumber||null!=u.pageNumber)&&c.Z.get("".concat(o.Z,"/Storage/AllStoragePagination?pageNumber=").concat(u.pageNumber)).then(e=>{d(e.data.storages),p({pageNumber:e.data.pagination.pageNumber,pageSize:e.data.pagination.pageSize,total:e.data.pagination.total,hasNextPage:e.data.pagination.hasNextPage,hasPreviousPage:e.data.pagination.hasPreviousPage})}).catch(e=>{h(!0),r().fire({icon:"error",text:"حدث خطا اثناء جلب البيانات",timer:1200})})},[u.pageNumber]);let x=Math.ceil(u.total/u.pageSize),[g,j]=(0,n.useState)("");(0,n.useEffect)(()=>{""===g&&c.Z.get("".concat(o.Z,"/Storage/AllStoragePagination")).then(e=>{d(e.data.storages)}).catch(e=>{h(e),r().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[g]);let f=e=>{r().fire({title:"تأكيد",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم، احذف!",cancelButtonText:"إلغاء"}).then(a=>{a.isConfirmed&&c.Z.delete("".concat(o.Z,"/Storage/DeleteStorage?id=").concat(e)).then(a=>{r().fire({icon:"success",title:"تم الحذف بنجاح",showConfirmButton:!1,timer:800}),setTimeout(()=>{d(i.filter(a=>a.id!==e))},300)}).catch(e=>{e.response.data?r().fire({icon:"error",title:"".concat(e.response.data),timer:1500}):r().fire({icon:"error",title:"حدث خطأ ما أثناء الحذف",timer:1500})})})},[N,v]=(0,n.useState)(!1),[b,S]=(0,n.useState)(!1),[k,y]=(0,n.useState)([]);(0,n.useEffect)(()=>{c.Z.get("".concat(o.Z,"/Storage/AllDepartments")).then(e=>{y(e.data)}).catch(e=>{r().fire({icon:"error",text:"حدث خطا اثناء جلب اسماء الاقسام"})})},[]);let[C,P]=(0,n.useState)({id:"",phone:"",location:"",supervisor:"",name:"",departments:[{id:"",name:""}]}),Z=e=>{let{name:a,value:t}=e.target;P(e=>({...e,[a]:t}))},w=(e,a)=>{let{name:t,value:s}=a.target,n=k.find(e=>e.id==s),i=[...C.departments];i[e]={...i[e],[t]:s,name:n.name},P(e=>({...e,departments:i}))},[B,E]=(0,n.useState)(new Date),[A,D]=(0,n.useState)(!1),[F,q]=(0,n.useState)({date:!1,category:!1}),z=(0,n.useRef)(null),R=(0,n.useRef)(null),_=e=>{z.current&&!z.current.contains(e.target)&&R.current&&!R.current.contains(e.target)&&(D(!1),q({date:!1,category:!1}))};return(0,n.useEffect)(()=>(document.addEventListener("click",_),()=>{document.removeEventListener("click",_)}),[]),(0,s.jsxs)("div",{className:"table",children:[(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("div",{className:"head-box",children:(0,s.jsx)("div",{className:"add-head",children:(0,s.jsx)("p",{onClick:()=>v(!0),className:"add-item",children:"إضافة مخزن جديد"})})}),(0,s.jsxs)("div",{className:"search-box has-arrow",children:[(0,s.jsxs)("form",{className:"d-flex search-top-table-form",role:"search",onSubmit:e=>{e.preventDefault(),c.Z.get("".concat(o.Z,"/Storage/SearchStorage?name=").concat(g)).then(e=>{d(e.data)}).catch(e=>{r().fire({icon:"error",title:"لا يوجد نتائج",showConfirmButton:!1,timer:800})})},children:[(0,s.jsxs)("div",{className:"form-floating search-input",children:[(0,s.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"ابحث هنا",onChange:e=>j(e.target.value),value:g}),(0,s.jsx)("label",{htmlFor:"floatingInput",children:"ابحث هنا ( اسم المخزن )"})]}),(0,s.jsx)("button",{className:"btn",type:"submit",children:(0,s.jsx)("i",{className:"fa-solid fa-search"})})]}),(0,s.jsx)("div",{className:"go-back-arrow",children:(0,s.jsx)("p",{onClick:()=>{t.back()},children:(0,s.jsx)("i",{className:"fa-solid fa-chevron-right"})})})]})]}),(0,s.jsx)("div",{className:"table-contant",children:(0,s.jsxs)("table",{className:"table table-striped table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{id:"head-Of-table",children:[(0,s.jsx)("th",{type:"hide",children:(0,s.jsx)("input",{type:"checkbox",disabled:!0,checked:!0,id:"selectAll-input"})}),(0,s.jsx)("th",{scope:"col",type:"id",text:"ID",value:"id",children:"ID"}),(0,s.jsx)("th",{scope:"col",children:"رقم التليفون"}),(0,s.jsx)("th",{scope:"col",children:"الموقع"}),(0,s.jsx)("th",{scope:"col",children:"المشرف"}),(0,s.jsx)("th",{scope:"col",children:"الاسم"}),(0,s.jsx)("th",{scope:"col",children:"تعديل"}),(0,s.jsx)("th",{scope:"col",children:"حذف"})]})}),(0,s.jsxs)("tbody",{children:[null==i?void 0:i.map(e=>(0,s.jsxs)("tr",{style:{},children:[(0,s.jsx)("th",{scope:"row",children:(0,s.jsx)("div",{className:"check-box",children:(0,s.jsx)("input",{type:"checkbox",id:"checkbox-item",value:e.id,disabled:!0})})}),(0,s.jsx)("th",{scope:"row",children:(0,s.jsx)("div",{className:"check-box",children:(0,s.jsx)("p",{className:"item-id",children:e.id})})}),(0,s.jsx)("td",{className:"px-2",children:e.phone}),(0,s.jsx)("td",{children:e.location}),(0,s.jsx)("td",{children:e.supervisor}),(0,s.jsx)("td",{children:e.name}),(0,s.jsx)("td",{className:"pen icon",children:(0,s.jsx)("i",{className:"fa-regular fa-pen-to-square",onClick:()=>{S(!0),P(e),v(!0)}})}),(0,s.jsx)("td",{className:"trash icon",children:(0,s.jsx)("i",{className:"fa-regular fa-trash-can",onClick:()=>f(e.id)})})]},e.id)),0==i.length&&m&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"8",className:"text-center",style:{color:"#ff0000",fontSize:"1.5rem",padding:"30px 0",letterSpacing:"1px"},children:"لا يوجد بيانات"})}),0==i.length&&!m&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"8",className:"text-center",style:{fontSize:"1.5rem",color:"#000",padding:"30px 0",letterSpacing:"1px"},children:"الرجاء الانتظار جاري تحميل البيانات ..."})})]})]})})]}),(0,s.jsx)("div",{className:"pagination-box-inventory",children:(0,s.jsx)("nav",{"aria-label":"Page navigation example",children:(0,s.jsxs)("ul",{className:"pagination",children:[(0,s.jsx)("li",{className:"page-item ".concat(!u.hasPreviousPage&&"disabled"),children:(0,s.jsx)("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:()=>{u.hasPreviousPage&&p(e=>({...e,pageNumber:e.pageNumber-1}))},children:(0,s.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),x>0&&[...Array(x).keys()].map(e=>(0,s.jsx)("li",{className:"page-item ".concat(u.pageNumber===e+1&&"active"),children:(0,s.jsx)("a",{className:"page-link",href:"#",onClick:()=>p(a=>({...a,pageNumber:e+1})),children:e+1})},e+1)),(0,s.jsx)("li",{className:"page-item ".concat(!u.hasNextPage&&"disabled"),children:(0,s.jsx)("a",{className:"page-link",href:"#","aria-label":"Next",onClick:()=>{u.hasNextPage&&p(e=>({...e,pageNumber:e.pageNumber+1}))},children:(0,s.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})}),N?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"form-box-page-product-add-edite",children:[(0,s.jsx)("div",{className:"overlay"}),(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b?(c.Z.put("".concat(o.Z,"/Storage/UpdateStorage?id=").concat(C.id),{id:C.id,phone:C.phone,name:C.name,location:C.location,supervisor:C.supervisor,departments:C.departments}).then(e=>{r().fire({icon:"success",title:"تم الاضافة بنجاح",showConfirmButton:!1,timer:800}),setTimeout(()=>{d(i.map(a=>a.id===C.id?e.data:a))},300)}).catch(e=>{r().fire({icon:"error",text:"حدث خطا اثناء اضافة المخزن",timer:800})}),S(!1)):c.Z.post("".concat(o.Z,"/Storage/AddStorage"),{phone:C.phone,name:C.name,location:C.location,supervisor:C.supervisor,departments:C.departments}).then(e=>{r().fire({icon:"success",title:"تم الاضافة بنجاح",showConfirmButton:!1,timer:800}),P({id:"",phone:"",location:"",supervisor:"",name:"",departments:[{id:"",name:""}]}),c.Z.get("".concat(o.Z,"/Storage/AllStoragePagination")).then(e=>{d(e.data.storages)}).catch(e=>{h(e),r().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})}).catch(e=>{r().fire({icon:"error",text:"حدث خطا اثناء اضافة المخزن",timer:800})}),P({id:"",phone:"",location:"",supervisor:"",name:"",departments:[{id:"",name:""}]}),S(!1),v(!1)},children:[(0,s.jsxs)("div",{className:"title-box",children:[(0,s.jsx)("p",{className:"cansel-btn",onClick:()=>v(!1),children:(0,s.jsx)("i",{className:"fa-solid fa-xmark"})}),(0,s.jsx)("p",{className:"title",children:b?"تعديل مخزن":"مخزن جديد"}),(0,s.jsx)("p",{})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"name",children:"اسم المخزن"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:C.name,onChange:Z,required:!0})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"location",children:"الموقع"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"location",name:"location",value:C.location,onChange:Z,required:!0})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"supervisor",children:"المشرف"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"supervisor",name:"supervisor",value:C.supervisor,onChange:Z,required:!0})]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"phone",children:"رقم الهاتف"}),(0,s.jsx)("input",{type:"number",className:"form-control",id:"phone",name:"phone",value:C.phone,onChange:Z,required:!0})]})}),C.departments.map((e,a)=>(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"category-".concat(a,"-id"),children:"القسم"}),(0,s.jsxs)("select",{className:"form-control",id:"category-".concat(a,"-id"),name:"id",value:e.id,onChange:e=>w(a,e),required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"اختر اسم القسم"}),k.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})},a))]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsxs)("button",{type:"button",className:"btn btn-success",onClick:()=>{P(e=>({...e,departments:[...e.departments,{id:"",name:""}]}))},children:[(0,s.jsx)("i",{className:"fa-solid fa-plus"})," إضافة قسم اخر"]})}),(0,s.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:b?"حفظ":"إضافة"})})]})]})})]})}):null]})}},2798:function(){},1555:function(e,a,t){"use strict";t.d(a,{f:function(){return s}});let s=t(8620).Buffer.from("".concat("11190013",":").concat("60-dayfreetrial"),"utf8").toString("base64");a.Z="http://16.24.26.228:8080/api"}},function(e){e.O(0,[109,7908,9117,2971,8069,1744],function(){return e(e.s=8833)}),_N_E=e.O()}]);