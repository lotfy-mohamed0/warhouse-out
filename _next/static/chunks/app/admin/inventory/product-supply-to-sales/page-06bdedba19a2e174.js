(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1119],{7451:function(e,a,t){Promise.resolve().then(t.bind(t,1776))},7907:function(e,a,t){"use strict";var l=t(5313);t.o(l,"useRouter")&&t.d(a,{useRouter:function(){return l.useRouter}})},1776:function(e,a,t){"use strict";t.r(a);var l=t(3827),s=t(4090),i=t(3411),n=t.n(i),r=t(7907),c=t(7908),d=t(1555);a.default=()=>{var e;let a=(0,r.useRouter)(),[t,i]=(0,s.useState)([]),[o,m]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),[p,x]=(0,s.useState)({});(0,s.useEffect)(()=>{c.Z.get("".concat(d.Z,"/Bill/GetSalesSupplyForm")).then(e=>{i(e.data.salesSupplyForms),x(e.data.pagination)}).catch(e=>{m(!0),n().fire("خطأ","حدث خطأ أثناء جلب البيانات","error")})},[]);let[f,j]=(0,s.useState)("");(0,s.useEffect)(()=>{""===f&&c.Z.get("".concat(d.Z,"/Bill/GetSalesSupplyForm")).then(e=>{i(e.data.salesSupplyForms),x(e.data.pagination)}).catch(e=>{m(!0),n().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[f]),(0,s.useEffect)(()=>{(void 0!=p.pageNumber||null!=p.pageNumber)&&c.Z.get("".concat(d.Z,"/Bill/GetSalesSupplyForm?pageNumber=").concat(p.pageNumber)).then(e=>{i(e.data.salesSupplyForms),x(e.data.pagination)}).catch(e=>{m(!0),n().fire({icon:"error",text:"حدث خطا اثناء جلب البيانات",timer:1200})})},[p.pageNumber]);let b=Math.ceil(p.total/p.pageSize),N=e=>{n().fire("ملاحظات",e,"info")};return(0,l.jsxs)("div",{className:"container mt-5 product-supply-to-sales",children:[(0,l.jsxs)("div",{className:"d-flex justify-content-start align-items-center mb-3 header-box",children:[(0,l.jsx)("button",{onClick:()=>a.back(),className:"btn",children:(0,l.jsx)("i",{className:"fas fa-arrow-right"})}),(0,l.jsx)("div",{className:"search-box has-arrow",children:(0,l.jsxs)("form",{className:"d-flex search-top-table-form",role:"search",onSubmit:e=>{e.preventDefault(),c.Z.get("".concat(d.Z,"/Bill/SearchSalesSupplyForm?date=").concat(f)).then(e=>{i(e.data)}).catch(e=>{n().fire({icon:"error",title:"لا يوجد نتائج",showConfirmButton:!1,timer:800})})},children:[(0,l.jsx)("button",{className:"btn",type:"submit",children:(0,l.jsx)("i",{className:"fa-solid fa-search"})}),(0,l.jsxs)("div",{className:"form-floating search-input",children:[(0,l.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"ابحث هنا",onChange:e=>j(e.target.value),value:f}),(0,l.jsx)("label",{htmlFor:"floatingInput",children:"ابحث هنا ( التاريخ )"})]})]})})]}),(0,l.jsxs)("div",{className:"d-flex justify-content-between box-data-user",children:[(0,l.jsxs)("div",{className:"info-item-1",children:[(0,l.jsx)("span",{className:"info-title-1",children:"اسم القسم:"}),(0,l.jsx)("span",{className:"info-text-1",children:null===(e=t[0])||void 0===e?void 0:e.departmentName})]}),(0,l.jsxs)("div",{className:"info-item-1",children:[(0,l.jsx)("span",{className:"info-title-1",children:"البريد:"}),(0,l.jsx)("span",{className:"info-text-1",children:"sales@example.com"})]}),(0,l.jsxs)("div",{className:"info-item-1",children:[(0,l.jsx)("span",{className:"info-title-1",children:"رقم الهاتف:"}),(0,l.jsx)("span",{className:"info-text-1",children:"123-456-7890"})]})]}),(0,l.jsx)("div",{className:"title-table",children:(0,l.jsx)("p",{children:"جدول المنتجات التي يتم توريدها"})}),(0,l.jsx)("div",{className:"table-responsive",children:(0,l.jsxs)("table",{className:"table table-bordered",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"معرف المنتج"}),(0,l.jsx)("th",{children:"الكمية"}),(0,l.jsx)("th",{children:"تاريخ التوريد"}),(0,l.jsx)("th",{children:"ملاحظات"})]})}),(0,l.jsxs)("tbody",{children:[t.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.id}),(0,l.jsx)("td",{children:e.quantity}),(0,l.jsx)("td",{children:e.date.slice(0,10)}),(0,l.jsx)("td",{children:e.notes.length>15?(0,l.jsxs)(l.Fragment,{children:[e.notes.slice(0,15),"...",(0,l.jsx)("button",{onClick:()=>N(e.notes),className:"btn btn-link",children:"عرض المزيد"})]}):e.notes})]},e.id)),0==t.length&&o&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"8",className:"text-center",style:{color:"#ff0000",fontSize:"1.5rem",padding:"30px 0",letterSpacing:"1px"},children:"لا يوجد بيانات"})}),0==t.length&&!o&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"8",className:"text-center",style:{fontSize:"1.5rem",color:"#000",padding:"30px 0",letterSpacing:"1px"},children:"الرجاء الانتظار جاري تحميل البيانات ..."})})]})]})}),(0,l.jsx)("div",{className:"pagination-box-inventory",children:(0,l.jsx)("nav",{"aria-label":"Page navigation example",children:(0,l.jsxs)("ul",{className:"pagination",children:[(0,l.jsx)("li",{className:"page-item ".concat(!p.hasPreviousPage&&"disabled"),children:(0,l.jsx)("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:()=>{p.hasPreviousPage&&x(e=>({...e,pageNumber:e.pageNumber-1}))},children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),b>0&&[...Array(b).keys()].map(e=>(0,l.jsx)("li",{className:"page-item ".concat(p.pageNumber===e+1&&"active"),children:(0,l.jsx)("a",{className:"page-link",href:"#",onClick:()=>x(a=>({...a,pageNumber:e+1})),children:e+1})},e+1)),(0,l.jsx)("li",{className:"page-item ".concat(!p.hasNextPage&&"disabled"),children:(0,l.jsx)("a",{className:"page-link",href:"#","aria-label":"Next",onClick:()=>{p.hasNextPage&&x(e=>({...e,pageNumber:e.pageNumber+1}))},children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})}),h&&(0,l.jsx)("div",{className:"modal-overlay modal-product-supply-to-sales",children:(0,l.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog","aria-labelledby":"editModalLabel","aria-hidden":"true",children:(0,l.jsx)("div",{className:"modal-dialog modal-lg",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("button",{type:"button",className:"close btn",onClick:()=>u(null),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})}),(0,l.jsx)("h5",{className:"modal-title",id:"editModalLabel",children:"تعديل المنتج"})]}),(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("form",{children:[(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"description",className:"form-label",children:"الوصف"}),(0,l.jsx)("input",{id:"description",className:"form-control",value:h.description,onChange:e=>u({...h,description:e.target.value})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"quantity",className:"form-label",children:"الكمية"}),(0,l.jsx)("input",{id:"quantity",className:"form-control",type:"number",value:h.quantity,onChange:e=>u({...h,quantity:e.target.value})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"dateOfSupply",className:"form-label",children:"تاريخ التوريد"}),(0,l.jsx)("input",{id:"dateOfSupply",className:"form-control",type:"date",value:h.dateOfSupply,onChange:e=>u({...h,dateOfSupply:e.target.value})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"expectedDeliveryDate",className:"form-label",children:"تاريخ التسليم المتوقع"}),(0,l.jsx)("input",{id:"expectedDeliveryDate",className:"form-control",type:"date",value:h.expectedDeliveryDate,onChange:e=>u({...h,expectedDeliveryDate:e.target.value})})]}),(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:"notes",className:"form-label",children:"ملاحظات"}),(0,l.jsx)("textarea",{id:"notes",className:"form-control",value:h.notes,onChange:e=>u({...h,notes:e.target.value})})]}),(0,l.jsxs)("div",{className:"modal-footer",children:[(0,l.jsx)("button",{type:"button",className:"btn btn-del-item",onClick:()=>u(null),children:"إلغاء"}),(0,l.jsx)("button",{type:"button",className:"btn",onClick:()=>{c.Z.put("".concat(d.Z,"/Form/UpdateSuppliedProduct"),{id:h.id,productId:h.productDto.id,description:h.description,quantity:h.quantity,dateOfSupply:h.dateOfSupply,expectedDeliveryDate:h.expectedDeliveryDate,notes:h.notes}).then(e=>{n().fire({icon:"success",title:"تم التعديل",text:"تم تعديل المنتج بنجاح",timer:800}),setTimeout(()=>{i(t.map(e=>e.id===h.id?h:e))},300)}).catch(e=>{n().fire({icon:"error",title:"خطأ",text:"حدث خطأ أثناء تعديل المنتج",timer:800})}),u(null)},children:"حفظ التعديلات"})]})]})})]})})})})]})}},1555:function(e,a,t){"use strict";t.d(a,{f:function(){return l}});let l=t(8620).Buffer.from("".concat("11190013",":").concat("60-dayfreetrial"),"utf8").toString("base64");a.Z="http://16.24.26.228:8080/api"}},function(e){e.O(0,[9461,7908,2971,8069,1744],function(){return e(e.s=7451)}),_N_E=e.O()}]);