(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{5110:function(e,a,s){Promise.resolve().then(s.bind(s,5277))},7907:function(e,a,s){"use strict";var l=s(5313);s.o(l,"useRouter")&&s.d(a,{useRouter:function(){return l.useRouter}})},5277:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return h}});var l=s(3827),c=s(4090),t=s(7907),r=s(3441),i=s.n(r);s(2798);var n=s(7908),o=s(3411),d=s.n(o),m=s(1555);function h(){let e=(0,t.useRouter)(),[a,s]=(0,c.useState)([]),[r,o]=(0,c.useState)(!1),[h,u]=(0,c.useState)({});(0,c.useEffect)(()=>{n.Z.get("".concat(m.Z,"/RecievedOrders/AllStoredRecievedOrders")).then(e=>{s(e.data.recievedOrders),u(e.data.pagination)}).catch(e=>{o(!0),d().fire({icon:"error",title:"حدث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[]),(0,c.useEffect)(()=>{(void 0!=h.pageNumber||null!=h.pageNumber)&&n.Z.get("".concat(m.Z,"/RecievedOrders/AllStoredRecievedOrders?pageNumber=").concat(h.pageNumber)).then(e=>{s(e.data.recievedOrders),u(e.data.pagination)}).catch(e=>{o(!0),d().fire({icon:"error",text:"حدث خطا اثناء جلب البيانات",timer:1200})})},[h.pageNumber]);let x=Math.ceil(h.total/h.pageSize),[p,j]=(0,c.useState)("");(0,c.useEffect)(()=>{""===p&&n.Z.get("".concat(m.Z,"/RecievedOrders/AllStoredRecievedOrders")).then(e=>{s(e.data.recievedOrders),u(e.data.pagination)}).catch(e=>{d().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[p]);let N=e=>{n.Z.delete("".concat(m.Z,"/RecievedOrders/DeleteStoredOrder?id=").concat(e)).then(l=>{d().fire({icon:"success",title:"تم الحذف بنجاح",showConfirmButton:!1,timer:800}),s(a.filter(a=>a.id!==e))}).catch(e=>{d().fire({icon:"error",title:"حدث خطأ ما اثناء الحذف",showConfirmButton:!1,timer:800})}),a.find(a=>a.id===e)},[v,g]=(0,c.useState)(!1),[f,b]=(0,c.useState)({}),y=e=>{n.Z.get("".concat(m.Z,"/RecievedOrders/RecievedOrderById").concat(e.id)).then(e=>{b(e.data),g(!0)}).catch(e=>{d().fire({icon:"error",title:"حذث خطأ ما اثناء جلب البيانات",showConfirmButton:!1,timer:800})})},[w,k]=(0,c.useState)(new Date),[C,S]=(0,c.useState)(!1),[O,R]=(0,c.useState)({date:!1,category:!1}),F=(0,c.useRef)(null),D=(0,c.useRef)(null),Z=e=>{F.current&&!F.current.contains(e.target)&&D.current&&!D.current.contains(e.target)&&(S(!1),R({date:!1,category:!1}))};return(0,c.useEffect)(()=>(document.addEventListener("click",Z),()=>{document.removeEventListener("click",Z)}),[]),(0,l.jsxs)("div",{className:"table",children:[(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("div",{className:"header search-storage-box-item",children:(0,l.jsxs)("div",{className:"search-box has-arrow",children:[(0,l.jsxs)("div",{className:"option-manu",ref:F,children:[(0,l.jsx)("p",{children:(0,l.jsx)("button",{className:"btn btn-icon",type:"button",onClick:()=>S(!C),children:(0,l.jsx)("p",{className:"option-icon",children:(0,l.jsx)("i",{className:"fa-solid fa-sliders"})})})}),C&&(0,l.jsx)("div",{className:"collapse-body",children:(0,l.jsxs)("div",{className:"card card-body",children:[(0,l.jsx)("p",{children:(0,l.jsx)("button",{className:"btn head-box",type:"button",onClick:()=>R({...O,date:!O.date}),children:"التاريخ"})}),O.date&&(0,l.jsx)("div",{className:"collapse-horizontal",children:(0,l.jsx)("div",{className:"card card-body",style:{width:"300px"},ref:D,children:(0,l.jsx)(i(),{selected:w,onChange:e=>{k(e),j("");let a=e.getMonth()+1,l=e.getDate(),c=e.getFullYear(),t="".concat(c,"-").concat(a<10?"0".concat(a):a,"-").concat(l<10?"0".concat(l):l);n.Z.post("".concat(m.Z,"/RecievedOrders/SearchStoredOrders?date=").concat(t),{}).then(e=>{s(e.data)}).catch(e=>{d().fire({icon:"error",title:"لا يوجد نتائج",showConfirmButton:!1,timer:800})})}})})})]})})]}),(0,l.jsxs)("form",{className:"d-flex search-top-table-form",role:"search",onSubmit:e=>{e.preventDefault(),n.Z.post("".concat(m.Z,"/RecievedOrders/SearchStoredOrders"),{searchText:p}).then(e=>{s(e.data)}).catch(e=>{d().fire({icon:"error",title:"لا يوجد نتائج",showConfirmButton:!1,timer:800})})},children:[(0,l.jsxs)("div",{className:"form-floating search-input",children:[(0,l.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"ابحث هنا",onChange:e=>j(e.target.value),value:p}),(0,l.jsx)("label",{htmlFor:"floatingInput",children:"ابحث هنا"})]}),(0,l.jsx)("button",{className:"btn",type:"submit",children:(0,l.jsx)("i",{className:"fa-solid fa-search"})})]}),(0,l.jsx)("div",{className:"go-back-arrow",children:(0,l.jsx)("p",{onClick:()=>{e.back()},children:(0,l.jsx)("i",{className:"fa-solid fa-chevron-right"})})})]})}),(0,l.jsx)("div",{className:"table-contant",children:(0,l.jsxs)("table",{className:"table table-striped table-hover",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{id:"head-Of-table",children:[(0,l.jsx)("th",{scope:"col",children:"ID"}),(0,l.jsx)("th",{scope:"col",children:"معرف الفاتورة"}),(0,l.jsx)("th",{scope:"col",children:"معرف المنتج"}),(0,l.jsx)("th",{scope:"col",children:"الكمبة"}),(0,l.jsx)("th",{scope:"col",children:"الوحدة"}),(0,l.jsx)("th",{scope:"col",children:"الوزن"}),(0,l.jsx)("th",{scope:"col",children:"تاريخ الانتهاء"}),(0,l.jsx)("th",{scope:"col",children:"القسم"}),(0,l.jsx)("th",{scope:"col",children:"حذف"})]})}),(0,l.jsxs)("tbody",{children:[a.map(e=>{var a,s,c,t,r;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{scope:"row",children:(0,l.jsx)("div",{className:"check-box",children:(0,l.jsx)("p",{className:"item-id",children:e.id})})}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:e.bill.id}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:null===(a=e.products[0])||void 0===a?void 0:a.id}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:null===(s=e.products[0])||void 0===s?void 0:s.quantity}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:null===(c=e.products[0])||void 0===c?void 0:c.unit}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:null===(t=e.products[0])||void 0===t?void 0:t.weight}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:null===(r=e.products[0])||void 0===r?void 0:r.productDatesDto[0].expiryDate.slice(0,10)}),(0,l.jsx)("td",{className:"px-2",onClick:()=>y(e),style:{cursor:"pointer"},children:e.department.name}),(0,l.jsx)("td",{className:"trash icon",children:(0,l.jsx)("i",{className:"fa-regular fa-trash-can",onClick:()=>N(e.id),style:{cursor:"pointer"}})})]},e.id)}),0==a.length&&r&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"9",className:"text-center",style:{color:"#ff0000",fontSize:"1.5rem",padding:"30px 0",letterSpacing:"1px"},children:"لا يوجد بيانات"})}),0==a.length&&!r&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"9",className:"text-center",style:{fontSize:"1.5rem",color:"#000",padding:"30px 0",letterSpacing:"1px"},children:"الرجاء الانتظار جاري تحميل البيانات ..."})})]})]})})]}),(0,l.jsx)("div",{className:"pagination-box-inventory",children:(0,l.jsx)("nav",{"aria-label":"Page navigation example",children:(0,l.jsxs)("ul",{className:"pagination",children:[(0,l.jsx)("li",{className:"page-item ".concat(!h.hasPreviousPage&&"disabled"),children:(0,l.jsx)("a",{className:"page-link",href:"#","aria-label":"Previous",onClick:()=>{h.hasPreviousPage&&u(e=>({...e,pageNumber:e.pageNumber-1}))},children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xab"})})}),x>0&&[...Array(x).keys()].map(e=>(0,l.jsx)("li",{className:"page-item ".concat(h.pageNumber===e+1&&"active"),children:(0,l.jsx)("a",{className:"page-link",href:"#",onClick:()=>u(a=>({...a,pageNumber:e+1})),children:e+1})},e+1)),(0,l.jsx)("li",{className:"page-item ".concat(!h.hasNextPage&&"disabled"),children:(0,l.jsx)("a",{className:"page-link",href:"#","aria-label":"Next",onClick:()=>{h.hasNextPage&&u(e=>({...e,pageNumber:e.pageNumber+1}))},children:(0,l.jsx)("span",{"aria-hidden":"true",children:"\xbb"})})})]})})}),v&&(0,l.jsx)("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,l.jsx)("div",{className:"modal-purchase-orders storage-log",children:(0,l.jsxs)("div",{className:"modal-content",children:[(0,l.jsxs)("div",{className:"modal-header",children:[(0,l.jsx)("button",{type:"button",className:"btn close",onClick:()=>g(!1),children:(0,l.jsx)("i",{className:"bi bi-x-lg"})}),(0,l.jsx)("h5",{className:"modal-title storage-log",children:"التخزين"}),(0,l.jsx)("p",{})]}),(0,l.jsx)("div",{className:"modal-body",children:(0,l.jsxs)("form",{className:"row",children:[(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"id",children:"ID"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"id",name:"id",value:f.id?f.id:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"Name",children:"الاسم"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"Name",name:"Name",value:f.name?f.name:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"categoryName",children:"القسم"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"categoryName",name:"categoryName",value:f.departmentName?f.departmentName:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"Email",children:"البريد الإلكتروني"}),(0,l.jsx)("input",{type:"email",className:"form-control",id:"Email",name:"Email",value:f.email?f.email:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"phone",children:"الهاتف"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"phone",name:"phone",value:f.phone?f.phone:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"notes",children:"الملاحظات"}),(0,l.jsx)("textarea",{className:"form-control",id:"notes",name:"notes",value:f.notes?f.notes:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"row",children:f.products.map((e,a)=>{var s;return(0,l.jsx)("div",{className:"col-lg-6 col-md-12",children:(0,l.jsxs)("div",{className:"row w-100",children:[(0,l.jsx)("hr",{}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"itemId-".concat(a),children:"معرف المنتج"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"itemId-".concat(a),name:"itemId",value:e.id?e.id:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"name-".concat(a),children:"اسم المنتج"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"name-".concat(a),name:"name",value:e.name?e.name:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"quantity-".concat(a),children:"الكمية"}),(0,l.jsx)("input",{type:"number",className:"form-control",id:"quantity-".concat(a),name:"quantity",value:e.quantity?e.quantity:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"unit-".concat(a),children:"الوحدة"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"unit-".concat(a),name:"unit",value:e.unit?e.unit:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"weight-".concat(a),children:"الوزن"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"weight-".concat(a),name:"weight",value:e.weight?e.weight:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"weight-".concat(a),children:"القسم"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"weight-".concat(a),name:"weight",value:(null==e?void 0:null===(s=e.category)||void 0===s?void 0:s.name)?e.category.name:"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"weight-".concat(a),children:"تاريخ انتهاء الصلاحية"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"weight-".concat(a),name:"weight",value:(null==e?void 0:e.productDatesDto[0].expiryDate.slice(0,10))?e.productDatesDto[0].expiryDate.slice(0,10):"غير متوفر",disabled:!0})]})}),(0,l.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{htmlFor:"weight-".concat(a),children:"المخزن"}),(0,l.jsx)("input",{type:"text",className:"form-control",id:"weight-".concat(a),name:"weight",value:(null==e?void 0:e.storageName)?e.storageName:"غير متوفر",disabled:!0})]})})]})},a)})})]})})]})})})]})}},2798:function(){},1555:function(e,a,s){"use strict";s.d(a,{f:function(){return l}});let l=s(8620).Buffer.from("".concat("11190013",":").concat("60-dayfreetrial"),"utf8").toString("base64");a.Z="http://16.24.26.228:8080/api"}},function(e){e.O(0,[9461,1544,1778,7908,1564,9117,2971,8069,1744],function(){return e(e.s=5110)}),_N_E=e.O()}]);